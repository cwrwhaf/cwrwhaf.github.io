<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŽ¯ Professional Plinko Name Selector</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap');

        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --neutral-100: #f5f5f5;
            --neutral-200: #e5e5e5;
            --neutral-300: #d4d4d4;
            --neutral-600: #6b7280;
            --neutral-700: #374151;
            --neutral-800: #1f2937;
            --neutral-900: #111827;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #5b73e8 100%);
            background-attachment: fixed;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            line-height: 1.5;
            color: var(--neutral-700);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            padding: 32px;
            box-shadow: var(--shadow-xl), 0 0 0 1px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }



        .header {
            text-align: center;
            margin-bottom: 32px;
        }

        .title {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--neutral-800);
            margin: 0 0 8px 0;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--neutral-700);
            margin: 0;
            opacity: 0.8;
        }

        .name-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin-bottom: 24px;
            padding: 20px;
            background: var(--neutral-100);
            border-radius: 16px;
            border: 1px solid var(--neutral-200);
        }

        .name-chip {
            background: white;
            border: 2px solid var(--neutral-200);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            font-size: 0.875rem;
            color: var(--neutral-700);
            position: relative;
            overflow: hidden;
        }

        .name-chip::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .name-chip:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary-color);
        }

        .name-chip:hover::before {
            left: 100%;
        }

        .name-chip.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .name-chip.selected::before {
            display: none;
        }

        .plinko-board {
            position: relative;
            width: 100%;
            max-width: none;
            height: 450px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: 3px solid var(--neutral-300);
            border-radius: 20px;
            margin: 16px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.06), var(--shadow-lg);
        }

        .winner-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--success-color);
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), 0 0 20px rgba(16, 185, 129, 0.5);
            font-family: 'Poppins', sans-serif;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 200;
            pointer-events: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 16px 32px;
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 2px solid var(--success-color);
        }

        .winner-overlay.show {
            opacity: 1;
            animation: winnerPulse 2s ease infinite;
        }

        @keyframes winnerPulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.05);
                box-shadow: 0 12px 40px rgba(16, 185, 129, 0.4);
            }
        }

        .offline-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: 700;
            color: var(--danger-color);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            font-family: 'Poppins', sans-serif;
            opacity: 0;
            transition: all 0.6s ease;
            z-index: 250;
            pointer-events: none;
            text-align: center;
            max-width: 90%;
            line-height: 1.3;
            background: rgba(254, 242, 242, 0.95);
            padding: 20px 32px;
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 2px solid var(--danger-color);
        }

        .offline-overlay.show {
            opacity: 1;
            animation: offlineBlink 1.5s ease infinite;
        }

        @keyframes offlineBlink {
            0%, 100% {
                opacity: 1;
                box-shadow: 0 8px 32px rgba(239, 68, 68, 0.2);
            }
            50% {
                opacity: 0.8;
                box-shadow: 0 12px 40px rgba(239, 68, 68, 0.3);
            }
        }

        .peg {
            position: absolute;
            width: 14px;
            height: 14px;
            background: linear-gradient(135deg, var(--neutral-600), var(--neutral-700));
            border-radius: 50%;
            border: 2px solid var(--neutral-800);
            box-shadow: var(--shadow-sm), inset 0 1px 2px rgba(255, 255, 255, 0.1);
            transition: transform 0.1s ease;
        }

        .peg:hover {
            transform: scale(1.1);
        }

        .name-slots {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 85px;
            display: flex;
            background: var(--neutral-800);
            border-top: 3px solid var(--neutral-700);
            border-radius: 0 0 17px 17px;
        }

        .slot {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 500;
            font-size: 0.875rem;
            text-align: center;
            border-right: 2px solid var(--neutral-700);
            background: linear-gradient(135deg, var(--neutral-800), var(--neutral-700));
            padding: 8px;
            word-break: break-word;
            hyphens: auto;
            transition: all 0.3s ease;
        }

        .slot:last-child {
            border-right: none;
        }

        .slot.winner {
            background: linear-gradient(135deg, var(--success-color), #059669);
            animation: slotGlow 1s ease infinite alternate;
            transform: scale(1.05);
            z-index: 10;
            color: white;
            font-weight: 600;
        }

        @keyframes slotGlow {
            0% {
                box-shadow: 0 0 20px rgba(16, 185, 129, 0.6);
                background: linear-gradient(135deg, var(--success-color), #059669);
            }
            100% {
                box-shadow: 0 0 30px rgba(16, 185, 129, 0.8);
                background: linear-gradient(135deg, #059669, var(--success-color));
            }
        }

        .ball {
            position: absolute;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fbbf24, var(--secondary-color));
            border: 2px solid #d97706;
            box-shadow: var(--shadow-md), inset 0 1px 2px rgba(255, 255, 255, 0.3);
            z-index: 100;
            display: none;
        }

        .controls {
            text-align: center;
            margin: 10px 0;
        }

        .drop-button {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 0.95rem;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-lg);
            font-family: 'Inter', sans-serif;
            min-height: 60px;
            line-height: 1.3;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .drop-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .drop-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
        }

        .drop-button:hover::before {
            left: 100%;
        }

        .drop-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .drop-button:disabled:hover::before {
            left: -100%;
        }

        .result-banner {
            display: none;
        }

        .sound-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 1.5em;
            color: #3498db;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sound-indicator.active {
            opacity: 1;
            animation: soundPulse 0.5s ease;
        }

        @keyframes soundPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .celebration-burst {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
        }

        .burst-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #f39c12;
            border-radius: 50%;
        }

        @keyframes burstOut {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--dx), var(--dy)) scale(0);
                opacity: 0;
            }
        }

        .stats {
            background: white;
            border-radius: 8px;
            border: 1px solid var(--neutral-200);
            box-shadow: var(--shadow-sm);
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--neutral-800);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--neutral-600);
            font-weight: 500;
            margin-bottom: 6px;
        }

        .winners-list {
            text-align: center;
            font-size: 0.75rem;
            color: var(--neutral-600);
            min-height: 18px;
            margin-top: 6px;
        }

        .winner-name {
            display: inline-block;
            background: #ecfdf5;
            color: var(--success-color);
            padding: 4px 8px;
            border-radius: 6px;
            margin: 2px;
            font-weight: 500;
            border: 1px solid #d1fae5;
            font-size: 0.7rem;
        }

        .name-management {
            margin-bottom: 16px;
        }

        .name-input-section {
            display: flex;
            gap: 8px;
            align-items: center;
            padding: 16px;
            background: var(--neutral-100);
            border-radius: 12px;
            border: 1px solid var(--neutral-200);
        }

        .name-input {
            flex: 1;
            padding: 8px 12px;
            border: 2px solid var(--neutral-200);
            border-radius: 8px;
            font-size: 0.875rem;
            font-family: inherit;
            background: white;
            transition: border-color 0.2s ease;
        }

        .name-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .add-name-btn, .clear-all-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .add-name-btn {
            background: var(--primary-color);
            color: white;
        }

        .add-name-btn:hover {
            background: var(--primary-dark);
        }

        .add-name-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .clear-all-btn {
            background: var(--danger-color);
            color: white;
        }

        .clear-all-btn:hover {
            background: #dc2626;
        }

        .name-chip {
            position: relative;
        }

        .remove-name {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 16px;
            height: 16px;
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 10px;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            line-height: 1;
            transition: all 0.2s ease;
        }

        .name-chip:hover .remove-name {
            display: flex;
        }

        .remove-name:hover {
            background: #dc2626;
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="name-management">
            <div class="name-input-section">
                <input type="text" id="nameInput" placeholder="Enter a name..." class="name-input">
                <button id="addNameButton" class="add-name-btn">Add</button>
                <button id="clearAllButton" class="clear-all-btn">Clear All</button>
            </div>
        </div>

        <div class="name-selection" id="nameSelection">
        </div>

        <div class="stats" id="stats">
            <div class="stat" style="flex: 1;">
                <div class="winners-list" id="winnersList"></div>
            </div>
        </div>

        <div class="controls">
            <button class="drop-button" id="dropButton">Who's next?</button>
        </div>

        <div class="plinko-board" id="plinkoBoard">
            <div class="winner-overlay" id="winnerOverlay"></div>
            <div class="offline-overlay" id="offlineOverlay">CAN WE TAKE<br>THIS OFFLINE?</div>
            <div class="ball" id="ball"></div>
            <div class="name-slots" id="nameSlots"></div>
        </div>

        <div class="result-banner" id="resultBanner"></div>
    </div>

    <div class="sound-indicator" id="soundIndicator">ðŸ”Š</div>

    <script>
        const nameSelection = document.getElementById('nameSelection');
        const dropButton = document.getElementById('dropButton');
        const plinkoBoard = document.getElementById('plinkoBoard');
        const ball = document.getElementById('ball');
        const nameSlots = document.getElementById('nameSlots');
        const resultBanner = document.getElementById('resultBanner');
        const soundIndicator = document.getElementById('soundIndicator');
        const winnersList = document.getElementById('winnersList');
        const winnerOverlay = document.getElementById('winnerOverlay');
        const offlineOverlay = document.getElementById('offlineOverlay');
        const nameInput = document.getElementById('nameInput');
        const addNameButton = document.getElementById('addNameButton');
        const clearAllButton = document.getElementById('clearAllButton');

        let allNames = [];
        let selectedNames = new Set();
        let winners = [];
        let pegs = [];
        let offlineTimeout = null;

        // Create plinko pegs
        function createPegs() {
            const boardWidth = plinkoBoard.offsetWidth;
            const boardHeight = plinkoBoard.offsetHeight - 80; // Account for slots
            const rows = 12;
            const pegSpacing = boardHeight / rows;

            for (let row = 2; row < rows; row++) {
                const pegsInRow = row + 3;
                const rowWidth = boardWidth * 0.8;
                const startX = (boardWidth - rowWidth) / 2;

                for (let col = 0; col < pegsInRow; col++) {
                    const peg = document.createElement('div');
                    peg.className = 'peg';

                    const x = startX + (col * rowWidth / (pegsInRow - 1));
                    const y = row * pegSpacing;

                    peg.style.left = x + 'px';
                    peg.style.top = y + 'px';

                    plinkoBoard.appendChild(peg);
                    pegs.push({ x: x + 6, y: y + 6 }); // Center of peg
                }
            }
        }

        // Read names from URL parameters
        function readNamesFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const namesParam = urlParams.get('names');
            if (namesParam) {
                try {
                    const names = namesParam.split(',').map(name => name.trim()).filter(name => name);
                    if (names.length > 0) {
                        allNames = names;
                    }
                } catch (error) {
                    console.log('Error parsing names from URL:', error);
                }
            }
        }

        // Update URL parameters
        function updateURL() {
            const url = new URL(window.location);
            url.searchParams.set('names', allNames.join(','));
            window.history.replaceState({}, '', url);
        }

        // Add name to the list
        function addName(name) {
            const trimmedName = name.trim();
            if (trimmedName && !allNames.includes(trimmedName)) {
                allNames.push(trimmedName);
                selectedNames.add(trimmedName);
                updateURL();
                renderNameChips();
                updateUI();
                return true;
            }
            return false;
        }

        // Remove name from the list
        function removeName(name) {
            const index = allNames.indexOf(name);
            if (index > -1) {
                allNames.splice(index, 1);
                selectedNames.delete(name);
                updateURL();
                renderNameChips();
                updateUI();
            }
        }

        // Clear all names
        function clearAllNames() {
            allNames = [];
            selectedNames.clear();
            updateURL();
            renderNameChips();
            updateUI();
        }

        // Render name chips
        function renderNameChips() {
            nameSelection.innerHTML = '';
            allNames.forEach(name => {
                const chip = document.createElement('div');
                chip.className = 'name-chip';
                if (selectedNames.has(name)) {
                    chip.classList.add('selected');
                }
                chip.dataset.name = name;
                chip.innerHTML = `
                    ${name}
                    <button class="remove-name" onclick="removeName('${name}')">&times;</button>
                `;
                nameSelection.appendChild(chip);
            });
        }

        // Handle name selection
        nameSelection.addEventListener('click', (e) => {
            if (e.target.classList.contains('name-chip')) {
                const name = e.target.dataset.name;

                if (selectedNames.has(name)) {
                    selectedNames.delete(name);
                    e.target.classList.remove('selected');
                } else {
                    selectedNames.add(name);
                    e.target.classList.add('selected');
                }

                updateUI();
            }
        });

        // Add name button event
        addNameButton.addEventListener('click', () => {
            const name = nameInput.value;
            if (addName(name)) {
                nameInput.value = '';
            } else {
                alert('Name is empty or already exists');
            }
        });

        // Enter key on input
        nameInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addNameButton.click();
            }
        });

        // Clear all button event
        clearAllButton.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all names?')) {
                clearAllNames();
            }
        });

        let currentQuote = { text: 'Loading inspirational quote...', author: '' };

        function updateUI() {
            const count = selectedNames.size;

            if (count > 0) {
                dropButton.disabled = false;
               createNameSlots();
            } else {
                dropButton.disabled = true;
            }
        }

        function createNameSlots() {
            nameSlots.innerHTML = '';
            const names = Array.from(selectedNames);

            names.forEach(name => {
                const slot = document.createElement('div');
                slot.className = 'slot';
                slot.textContent = name;
                slot.dataset.name = name;
                nameSlots.appendChild(slot);
            });
        }

        function playSound() {
            soundIndicator.classList.add('active');
            setTimeout(() => soundIndicator.classList.remove('active'), 500);
        }

        function createCelebrationBurst(x, y) {
            const burst = document.createElement('div');
            burst.className = 'celebration-burst';
            burst.style.left = x + 'px';
            burst.style.top = y + 'px';
            document.body.appendChild(burst);

            for (let i = 0; i < 12; i++) {
                const particle = document.createElement('div');
                particle.className = 'burst-particle';

                const angle = (i / 12) * 2 * Math.PI;
                const distance = 100;
                const dx = Math.cos(angle) * distance;
                const dy = Math.sin(angle) * distance;

                particle.style.setProperty('--dx', dx + 'px');
                particle.style.setProperty('--dy', dy + 'px');
                particle.style.background = ['#e74c3c', '#f39c12', '#2ecc71', '#3498db', '#9b59b6'][Math.floor(Math.random() * 5)];
                particle.style.animation = 'burstOut 1s ease-out forwards';

                burst.appendChild(particle);
            }

            setTimeout(() => burst.remove(), 1000);
        }

        async function dropBall() {
            if (selectedNames.size === 0) return;

            dropButton.disabled = true;
            resultBanner.classList.remove('show');
            winnerOverlay.classList.remove('show');
            offlineOverlay.classList.remove('show');

            // Clear any pending offline timeout
            if (offlineTimeout) {
                clearTimeout(offlineTimeout);
                offlineTimeout = null;
            }

            // Reset all slots
            document.querySelectorAll('.slot').forEach(slot => {
                slot.classList.remove('winner');
            });

            // Position ball at random location across the top
            const boardRect = plinkoBoard.getBoundingClientRect();
            const boardWidth = plinkoBoard.offsetWidth;
            const margin = 30; // Keep ball away from edges
            const startX = margin + Math.random() * (boardWidth - 2 * margin) - 10;

            ball.style.left = startX + 'px';
            ball.style.top = '20px';
            ball.style.display = 'block';

            // Physics simulation
            let ballX = startX + 10; // Center of ball
            let ballY = 30;
            let velocityX = (Math.random() - 0.5) * 2;
            let velocityY = 0;
            const gravity = 0.5;
            const bounce = 0.7;
            const friction = 0.98;

            function animate() {
                // Apply gravity
                velocityY += gravity;

                // Update position
                ballX += velocityX;
                ballY += velocityY;

                // Check collision with pegs
                pegs.forEach(peg => {
                    const dx = ballX - peg.x;
                    const dy = ballY - peg.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < 16) { // Ball radius + peg radius
                        playSound('bounce');

                        // Calculate bounce direction
                        const angle = Math.atan2(dy, dx);
                        velocityX = Math.cos(angle) * 3 + (Math.random() - 0.5) * 2;
                        velocityY = Math.sin(angle) * 2;

                        // Move ball out of peg
                        ballX = peg.x + Math.cos(angle) * 16;
                        ballY = peg.y + Math.sin(angle) * 16;
                    }
                });

                // Check wall collisions
                if (ballX < 10) {
                    ballX = 10;
                    velocityX = Math.abs(velocityX) * bounce;
                }
                if (ballX > plinkoBoard.offsetWidth - 10) {
                    ballX = plinkoBoard.offsetWidth - 10;
                    velocityX = -Math.abs(velocityX) * bounce;
                }

                // Apply friction
                velocityX *= friction;

                // Update visual position
                ball.style.left = (ballX - 10) + 'px';
                ball.style.top = ballY + 'px';

                // Check if ball reached bottom
                if (ballY >= plinkoBoard.offsetHeight - 90) {
                    finalizeDrop(ballX);
                    return;
                }

                requestAnimationFrame(animate);
            }

            animate();
        }

        function finalizeDrop(finalX) {
            // Determine which slot the ball landed in
            const slotWidth = nameSlots.offsetWidth / selectedNames.size;
            const slotIndex = Math.floor(finalX / slotWidth);
            const slots = document.querySelectorAll('.slot');
            const winningSlot = slots[Math.min(slotIndex, slots.length - 1)];

            if (winningSlot) {
                const winnerName = winningSlot.dataset.name;

                // Animate winning slot
                winningSlot.classList.add('winner');

                // Show result on board and banner
                winnerOverlay.textContent = winnerName;
                winnerOverlay.classList.add('show');


                // Show offline message after 10 seconds and hide winner name
                offlineTimeout = setTimeout(() => {
                    winnerOverlay.classList.remove('show');
                    offlineOverlay.classList.add('show');
                }, 10000);

                // Create celebration
                const slotRect = winningSlot.getBoundingClientRect();
                createCelebrationBurst(
                    slotRect.left + slotRect.width / 2,
                    slotRect.top + slotRect.height / 2
                );

                // Remove winner from selection
                selectedNames.delete(winnerName);
                const nameChip = document.querySelector(`[data-name="${winnerName}"]`);
                nameChip.classList.remove('selected');
                nameChip.style.opacity = '0.5';
                nameChip.style.transform = 'scale(0.9)';

                // Update winners list
                winners.push(winnerName);
                updateWinnersList();
            }

            // Update UI

            ball.style.display = 'none';
            updateUI();
            dropButton.disabled = false;
        }

        function updateWinnersList() {
            if (winners.length === 0) {
                winnersList.textContent = '';
            } else {
                winnersList.innerHTML = winners.map(name =>
                    `<span class="winner-name">${name}</span>`
                ).join('');
            }
        }

        // Fetch random quote from ZenQuotes API
        async function fetchQuote() {
            try {
                const response = await fetch('https://zenquotes.io/api/random');
                const data = await response.json();

                if (data && data.length > 0) {
                    const quote = data[0];
                    currentQuote = {
                        text: quote.q,
                        author: quote.a
                    };
                } else {
                    throw new Error('No quote data');
                }
            } catch (error) {
                console.log('Failed to load quote:', error);
                currentQuote = {
                    text: 'The only way to do great work is to love what you do.',
                    author: 'Steve Jobs'
                };
            }

            // Update button text after quote is loaded
            updateUI();
        }

        dropButton.addEventListener('click', dropBall);

        // Initialize
        createPegs();

        // Initialize
        readNamesFromURL();
        renderNameChips();

        // Set all name chips as selected by default
        allNames.forEach(name => selectedNames.add(name));
        renderNameChips();

        // Load quote and update UI
        fetchQuote();
        updateWinnersList();
    </script>
</body>
</html>
